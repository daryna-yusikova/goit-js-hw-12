{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n\n// getImagesByQuery(query).Ця функція повинна приймати один параметр query(пошукове слово, яке є рядком),\n//     здійснювати HTTP - запит і повертати значення властивості data з отриманої відповіді.\n\n// https://pixabay.com/api/?key=46534617-f030fa7fdef1b59853604705d&q=yellow+flowers&image_type=photo\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/';\n\nexport const PER_PAGE = 15;\n\nexport const API_KEY = 'api/?key=46534617-f030fa7fdef1b59853604705d';\n\nexport function getImagesByQuery(query = '', page = 1) {\n  const editedQuery = query.trim().split(' ').join('+');\n  return axios(\n    `${API_KEY}&q=${editedQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`\n  );\n}\n","// У файлі render-functions.js створи екземпляр SimpleLightbox для\n// роботи з модальним вікном та зберігай функції для відображення елементів інтерфейсу:\n\n// createGallery(images). Ця функція повинна приймати масив images,\n// створювати HTML-розмітку для галереї, додавати її в контейнер галереї\n// та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n// clearGallery(). Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\n// showLoader(). Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\n// hideLoader(). Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\n\n// showLoadMoreButton(). Ця функція нічого не приймає, повинна додавати\n//  клас для відображення кнопки Load more. Нічого не повертає.\n\n// hideLoadMoreButton(). Ця функція нічого не приймає, повинна прибирати\n// клас для відображення кнопки Load more. Нічого не повертає.\n\n// webformatURL — посилання на маленьке зображення для списку карток у галереї\n// largeImageURL — посилання на велике зображення для модального вікна\n// tags — рядок з описом зображення. Підійде для атрибута alt\n// likes — кількість вподобайок\n// views — кількість переглядів\n// comments — кількість коментарів\n// downloads — кількість завантажень\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.load-more');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const imagesMarkup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class= \"gallery-item\"><a href =\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt = \"${tags}\" data-image = \"${largeImageURL}\"></a>\n        <ul class = \"item-dscr\"><li class=\"stats\"><h3>Likes</h3><p>${likes}</p></li>\n        <li class=\"stats\"><h3>Views</h3><p>${views}</p></li>\n        <li class=\"stats\"><h3>Comments</h3><p>${comments}</p></li>\n        <li class=\"stats\"><h3>Downloads</h3><p>${downloads}</p></li>\n        </ul></li>`;\n      }\n    )\n    .join(' ');\n  gallery.insertAdjacentHTML('beforeend', imagesMarkup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","// У файлі main.js напиши всю логіку роботи додатка.\n// Виклики нотифікацій iziToast, усі перевірки на довжину масиву\n// в отриманій відповіді робимо саме в цьому файлі. Імпортуй в\n// нього функції із файлів pixabay-api.js та render-functions.js та викликай їх у відповідний момент.\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  loadMoreBtn,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', searchButtonHandler);\nloadMoreBtn.addEventListener('click', loadMoreButtonHandler);\n\nlet searchQuery = '';\n\nlet pageNumber = 1;\n\nasync function searchButtonHandler(e) {\n  e.preventDefault();\n  searchQuery = e.target.elements['search-text'].value.trim();\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n  hideLoadMoreButton();\n  clearGallery();\n  pageNumber = 1;\n  showLoader();\n  try {\n    const { data } = await getImagesByQuery(searchQuery, pageNumber);\n    const imagesArray = data.hits;\n    if (imagesArray.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    createGallery(imagesArray);\n    const totalPages = Math.ceil(data.totalHits / PER_PAGE);\n    if (pageNumber >= totalPages) {\n      iziToast.info({\n        title: 'Limit reached',\n        message: \"We are sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    hideLoader();\n  }\n  form.reset();\n}\n\nasync function loadMoreButtonHandler(e) {\n  pageNumber += 1;\n  showLoader();\n  try {\n    const { data } = await getImagesByQuery(searchQuery, pageNumber);\n    const imagesArray = data.hits;\n    createGallery(imagesArray);\n    const firstCard = document.querySelector('.gallery-item');\n    if (firstCard) {\n      const { height } = firstCard.getBoundingClientRect();\n\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n    const totalPages = Math.ceil(data.totalHits / PER_PAGE);\n    if (pageNumber >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'Limit reached',\n        message: \"We are sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["axios","PER_PAGE","API_KEY","getImagesByQuery","query","page","editedQuery","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","imagesMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchButtonHandler","loadMoreButtonHandler","searchQuery","pageNumber","e","iziToast","data","imagesArray","totalPages","error","firstCard","height"],"mappings":"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"}